function e(){if(console.log("[Slider] Initializing draggable infinite slider"),"undefined"==typeof gsap||"undefined"==typeof Draggable||"undefined"==typeof InertiaPlugin)return console.warn("⚠️ GSAP, Draggable, or InertiaPlugin not found. Make sure they are loaded."),void console.log("[Slider] Plugin status:",{gsap:typeof gsap,Draggable:typeof Draggable,InertiaPlugin:typeof InertiaPlugin});console.log("[Slider] All GSAP plugins found, registering..."),gsap.registerPlugin(Draggable,InertiaPlugin),function(){console.log("[Slider] Starting initSlider()");const e=document.querySelector('[data-slider="list"]');if(!e)return void console.warn('[Slider] No wrapper found with [data-slider="list"]');console.log("[Slider] Wrapper found:",e);const t=gsap.utils.toArray('[data-slider="slide"]');if(console.log("[Slider] Found",t.length,"slides"),0===t.length)return void console.warn('[Slider] No slides found with [data-slider="slide"]');const n=document.querySelector('[data-slider="button-next"]'),o=document.querySelector('[data-slider="button-prev"]');console.log("[Slider] Buttons:",{next:!!n,prev:!!o});const r=document.querySelector('[data-slide-count="total"]'),a=document.querySelector('[data-slide-count="step"]'),s=a?.parentElement;let i;const l=t.length;r&&(r.textContent=l<10?`0${l}`:l),s&&a&&(s.innerHTML="",t.forEach((e,t)=>{const n=a.cloneNode(!0);n.textContent=t+1<10?`0${t+1}`:t+1,s.appendChild(n)}));const d=s?s.querySelectorAll('[data-slide-count="step"]'):[],c=window.matchMedia("(min-width: 992px)");let g=c.matches;c.addEventListener("change",e=>{g=e.matches,u&&f(u,p,!1)});let u=null,p=0;function f(e,n,o=!0){i&&i.classList.remove("active");const r=function(e){return g?e.nextElementSibling||t[0]:e}(e);r.classList.add("active"),i=r,d.length&&(o?gsap.to(d,{y:-100*n+"%",ease:"power3",duration:.45}):gsap.set(d,{y:-100*n+"%"}))}console.log("[Slider] Creating horizontal loop...");const h=function(e,t){e=gsap.utils.toArray(e);const n=(t=t||{}).onChange;let o=0;const r=gsap.timeline({repeat:t.repeat,onUpdate:n&&function(){const t=r.closestIndex();o!==t&&(o=t,n(e[t],t))},paused:t.paused,defaults:{ease:"none"},onReverseComplete:()=>r.totalTime(r.rawTime()+100*r.duration())}),a=e.length,s=e[0].offsetLeft,i=[],l=[],d=[],c=[];let g=0,u=!1;const p=t.center,f=100*(t.speed||1),h=!1===t.snap?e=>e:gsap.utils.snap(t.snap||1);let m=0;const x=!0===p?e[0].parentNode:gsap.utils.toArray(p)[0]||e[0].parentNode;let w;const y=()=>e[a-1].offsetLeft+c[a-1]/100*l[a-1]-s+d[0]+e[a-1].offsetWidth*gsap.getProperty(e[a-1],"scaleX")+(parseFloat(t.paddingRight)||0),S=()=>{let t,n=x.getBoundingClientRect();e.forEach((e,o)=>{l[o]=parseFloat(gsap.getProperty(e,"width","px")),c[o]=h(parseFloat(gsap.getProperty(e,"x","px"))/l[o]*100+gsap.getProperty(e,"xPercent")),t=e.getBoundingClientRect(),d[o]=t.left-(o?n.right:n.left),n=t}),gsap.set(e,{xPercent:e=>c[e]}),w=y()},v=()=>{m=p?r.duration()*(x.offsetWidth/2)/w:0,p&&i.forEach((e,t)=>{i[t]=E(r.labels[`label${t}`]+r.duration()*l[t]/2/w-m)})},b=(e,t,n)=>{let o,r=e.length,a=1e10,s=0;for(;r--;)o=Math.abs(e[r]-t),o>n/2&&(o=n-o),o<a&&(a=o,s=r);return s},P=()=>{let t,n,o,g,u;for(r.clear(),t=0;t<a;t++)n=e[t],o=c[t]/100*l[t],g=n.offsetLeft+o-s+d[0],u=g+l[t]*gsap.getProperty(n,"scaleX"),r.to(n,{xPercent:h((o-u)/l[t]*100),duration:u/f},0).fromTo(n,{xPercent:h((o-u+w)/l[t]*100)},{xPercent:c[t],duration:(o-u+w-o)/f,immediateRender:!1},u/f).add(`label${t}`,g/f),i[t]=g/f;E=gsap.utils.wrap(0,r.duration())},I=e=>{const t=r.progress();r.progress(0,!0),S(),e&&P(),v(),e&&r.draggable?r.time(i[g],!0):r.progress(t,!0)},C=()=>I(!0);let E,L;function T(e,t){t=t||{},Math.abs(e-g)>a/2&&(e+=e>g?-a:a);const n=gsap.utils.wrap(0,a,e);let o=i[n];return o>r.time()!=e>g&&e!==g&&(o+=r.duration()*(e>g?1:-1)),(o<0||o>r.duration())&&(t.modifiers={time:E}),g=n,t.overwrite=!0,gsap.killTweensOf(L),0===t.duration?r.time(E(o)):r.tweenTo(o,t)}gsap.set(e,{x:0}),S(),P(),v(),window.addEventListener("resize",C),r.toIndex=(e,t)=>T(e,t),r.closestIndex=e=>{const t=b(i,r.time(),r.duration());return e&&(g=t,u=!1),t},r.current=()=>u?r.closestIndex(!0):g,r.next=e=>T(r.current()+1,e),r.previous=e=>T(r.current()-1,e),r.times=i,r.progress(1,!0).progress(0,!0),t.reversed&&(r.vars.onReverseComplete(),r.reverse());if(t.draggable&&"function"==typeof Draggable){L=document.createElement("div");const t=gsap.utils.wrap(0,1);let n,o,a,s,l;const d=()=>r.closestIndex(!0);"undefined"==typeof InertiaPlugin&&console.warn("InertiaPlugin required for momentum-based scrolling and snapping. https://greensock.com/club");const c=Draggable.create(L,{trigger:e[0].parentNode,type:"x",onPressInit(){const e=this.x;gsap.killTweensOf(r),l=!r.paused(),r.pause(),o=r.progress(),I(),n=1/w,s=o/-n-e,gsap.set(L,{x:o/-n})},onDrag(){r.progress(t(o+(this.startX-this.x)*n))},onThrowUpdate(){r.progress(t(o+(this.startX-this.x)*n))},overshootTolerance:0,inertia:!0,snap(e){if(Math.abs(o/-n-this.x)<10)return a+s;const t=-e*n*r.duration(),l=E(t);let d=i[b(i,l,r.duration())]-l;return Math.abs(d)>r.duration()/2&&(d+=d<0?r.duration():-r.duration()),a=(t+d)/r.duration()/-n,a},onRelease(){d(),this.isThrowing&&(u=!0)},onThrowComplete:()=>{d(),l&&r.play()}})[0];r.draggable=c}return r.closestIndex(!0),o=g,n&&n(e[g],g),r}(t,{paused:!0,draggable:!0,center:!1,onChange:(e,t)=>{console.log("[Slider] onChange:",{index:t,element:e}),u=e,p=t,f(e,t,!0)}});console.log("[Slider] Horizontal loop created:",h),t.forEach((e,t)=>{e.addEventListener("click",()=>{e.classList.contains("active")||h.toIndex(function(e){return g?e-1:e}(t),{ease:"power3",duration:.725})})}),n?.addEventListener("click",()=>h.next({ease:"power3",duration:.725})),o?.addEventListener("click",()=>h.previous({ease:"power3",duration:.725})),!u&&t[0]&&(console.log("[Slider] Setting initial active state"),u=t[0],p=0,f(u,p,!1)),console.log("[Slider] ✓ Initialization complete")}()}export{e as i};
