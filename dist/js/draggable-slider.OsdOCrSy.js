function e(){if(console.log("[Slider] Initializing draggable infinite slider"),"undefined"==typeof gsap||"undefined"==typeof Draggable||"undefined"==typeof InertiaPlugin)return console.warn("⚠️ GSAP, Draggable, or InertiaPlugin not found. Make sure they are loaded."),void console.log("[Slider] GSAP:",typeof gsap,"Draggable:",typeof Draggable,"InertiaPlugin:",typeof InertiaPlugin);console.log("[Slider] GSAP plugins found, registering..."),gsap.registerPlugin(Draggable,InertiaPlugin),function(){console.log("[Slider] Starting initSlider");const e=document.querySelector('[data-slider="list"]');if(!e)return void console.warn('[Slider] No wrapper found with selector [data-slider="list"]');console.log("[Slider] Wrapper found:",e);const t=gsap.utils.toArray('[data-slider="slide"]');if(console.log("[Slider] Found slides:",t.length),0===t.length)return void console.warn('[Slider] No slides found with selector [data-slider="slide"]');const n=document.querySelector('[data-slider="button-next"]'),r=document.querySelector('[data-slider="button-prev"]'),o=document.querySelector('[data-slide-count="total"]'),a=document.querySelector('[data-slide-count="step"]'),s=a?.parentElement;let i;const l=t.length;o&&(o.textContent=l<10?`0${l}`:l),s&&a&&(s.innerHTML="",t.forEach((e,t)=>{const n=a.cloneNode(!0);n.textContent=t+1<10?`0${t+1}`:t+1,s.appendChild(n)}));const d=s?s.querySelectorAll('[data-slide-count="step"]'):[],c=window.matchMedia("(min-width: 992px)");let g=c.matches;c.addEventListener("change",e=>{g=e.matches,u&&f(u,p,!1)});let u=null,p=0;function f(e,n,r=!0){i&&i.classList.remove("active");const o=function(e){return g?e.nextElementSibling||t[0]:e}(e);o.classList.add("active"),i=o,d.length&&(r?gsap.to(d,{y:-100*n+"%",ease:"power3",duration:.45}):gsap.set(d,{y:-100*n+"%"}))}const h=function(e,t){e=gsap.utils.toArray(e);const n=(t=t||{}).onChange;let r=0;const o=gsap.timeline({repeat:t.repeat,onUpdate:n&&function(){const t=o.closestIndex();r!==t&&(r=t,n(e[t],t))},paused:t.paused,defaults:{ease:"none"},onReverseComplete:()=>o.totalTime(o.rawTime()+100*o.duration())}),a=e.length,s=e[0].offsetLeft,i=[],l=[],d=[],c=[];let g=0,u=!1;const p=t.center,f=100*(t.speed||1),h=!1===t.snap?e=>e:gsap.utils.snap(t.snap||1);let m=0;const w=!0===p?e[0].parentNode:gsap.utils.toArray(p)[0]||e[0].parentNode;let x;const y=()=>e[a-1].offsetLeft+c[a-1]/100*l[a-1]-s+d[0]+e[a-1].offsetWidth*gsap.getProperty(e[a-1],"scaleX")+(parseFloat(t.paddingRight)||0),b=()=>{let t,n=w.getBoundingClientRect();e.forEach((e,r)=>{l[r]=parseFloat(gsap.getProperty(e,"width","px")),c[r]=h(parseFloat(gsap.getProperty(e,"x","px"))/l[r]*100+gsap.getProperty(e,"xPercent")),t=e.getBoundingClientRect(),d[r]=t.left-(r?n.right:n.left),n=t}),gsap.set(e,{xPercent:e=>c[e]}),x=y()},v=()=>{m=p?o.duration()*(w.offsetWidth/2)/x:0,p&&i.forEach((e,t)=>{i[t]=E(o.labels[`label${t}`]+o.duration()*l[t]/2/x-m)})},P=(e,t,n)=>{let r,o=e.length,a=1e10,s=0;for(;o--;)r=Math.abs(e[o]-t),r>n/2&&(r=n-r),r<a&&(a=r,s=o);return s},S=()=>{let t,n,r,g,u;for(o.clear(),t=0;t<a;t++)n=e[t],r=c[t]/100*l[t],g=n.offsetLeft+r-s+d[0],u=g+l[t]*gsap.getProperty(n,"scaleX"),o.to(n,{xPercent:h((r-u)/l[t]*100),duration:u/f},0).fromTo(n,{xPercent:h((r-u+x)/l[t]*100)},{xPercent:c[t],duration:(r-u+x-r)/f,immediateRender:!1},u/f).add(`label${t}`,g/f),i[t]=g/f;E=gsap.utils.wrap(0,o.duration())},I=e=>{const t=o.progress();o.progress(0,!0),b(),e&&S(),v(),e&&o.draggable?o.time(i[g],!0):o.progress(t,!0)},L=()=>I(!0);let E,C;function T(e,t){t=t||{},Math.abs(e-g)>a/2&&(e+=e>g?-a:a);const n=gsap.utils.wrap(0,a,e);let r=i[n];return r>o.time()!=e>g&&e!==g&&(r+=o.duration()*(e>g?1:-1)),(r<0||r>o.duration())&&(t.modifiers={time:E}),g=n,t.overwrite=!0,gsap.killTweensOf(C),0===t.duration?o.time(E(r)):o.tweenTo(r,t)}gsap.set(e,{x:0}),b(),S(),v(),window.addEventListener("resize",L),o.toIndex=(e,t)=>T(e,t),o.closestIndex=e=>{const t=P(i,o.time(),o.duration());return e&&(g=t,u=!1),t},o.current=()=>u?o.closestIndex(!0):g,o.next=e=>T(o.current()+1,e),o.previous=e=>T(o.current()-1,e),o.times=i,o.progress(1,!0).progress(0,!0),t.reversed&&(o.vars.onReverseComplete(),o.reverse());if(t.draggable&&"function"==typeof Draggable){C=document.createElement("div");const t=gsap.utils.wrap(0,1);let n,r,a,s,l;const d=()=>o.closestIndex(!0);"undefined"==typeof InertiaPlugin&&console.warn("InertiaPlugin required for momentum-based scrolling and snapping. https://greensock.com/club");const c=Draggable.create(C,{trigger:e[0].parentNode,type:"x",onPressInit(){const e=this.x;gsap.killTweensOf(o),l=!o.paused(),o.pause(),r=o.progress(),I(),n=1/x,s=r/-n-e,gsap.set(C,{x:r/-n})},onDrag(){o.progress(t(r+(this.startX-this.x)*n))},onThrowUpdate(){o.progress(t(r+(this.startX-this.x)*n))},overshootTolerance:0,inertia:!0,snap(e){if(Math.abs(r/-n-this.x)<10)return a+s;const t=-e*n*o.duration(),l=E(t);let d=i[P(i,l,o.duration())]-l;return Math.abs(d)>o.duration()/2&&(d+=d<0?o.duration():-o.duration()),a=(t+d)/o.duration()/-n,a},onRelease(){d(),this.isThrowing&&(u=!0)},onThrowComplete:()=>{d(),l&&o.play()}})[0];o.draggable=c}return o.closestIndex(!0),r=g,n&&n(e[g],g),o}(t,{paused:!0,draggable:!0,center:!1,onChange:(e,t)=>{u=e,p=t,f(e,t,!0)}});t.forEach((e,t)=>{e.addEventListener("click",()=>{e.classList.contains("active")||h.toIndex(function(e){return g?e-1:e}(t),{ease:"power3",duration:.725})})}),n?.addEventListener("click",()=>h.next({ease:"power3",duration:.725})),r?.addEventListener("click",()=>h.previous({ease:"power3",duration:.725})),!u&&t[0]&&(u=t[0],p=0,f(u,p,!1))}()}"undefined"!=typeof window&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),window.initDraggableInfiniteSlider=e);
