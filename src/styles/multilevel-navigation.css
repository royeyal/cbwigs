/* Multilevel Navigation script */

:root {
  --nav-bg-height: calc(20em + calc(2em + 3em + 2.5em + 3em));
  --cubic-default: cubic-bezier(0.525, 0, 0, 1);
  --duration-fast: 0.2s;
  --duration-normal: 0.45s;
  --duration-slow: 0.6s;
  --color-dark: var(--brand--text, #1a1a1ae0);
  --shadow-color: 34deg 12% 56%;
  --shadow-elevation-low:
    0.3px 0.5px 0.7px hsl(var(--shadow-color) / 34%),
    0.4px 0.8px 1px -1.2px hsl(var(--shadow-color) / 34%),
    1px 2px 2.5px -2.5px hsl(var(--shadow-color) / 34%);
  --shadow-elevation-medium:
    0.3px 0.5px 0.7px hsl(var(--shadow-color) / 36%),
    0.8px 1.6px 2px -0.8px hsl(var(--shadow-color) / 36%),
    2.1px 4.1px 5.2px -1.7px hsl(var(--shadow-color) / 36%),
    5px 10px 12.6px -2.5px hsl(var(--shadow-color) / 36%);
  --shadow-elevation-high:
    0.3px 0.5px 0.7px hsl(var(--shadow-color) / 34%),
    1.5px 2.9px 3.7px -0.4px hsl(var(--shadow-color) / 34%),
    2.7px 5.4px 6.8px -0.7px hsl(var(--shadow-color) / 34%),
    4.5px 8.9px 11.2px -1.1px hsl(var(--shadow-color) / 34%),
    7.1px 14.3px 18px -1.4px hsl(var(--shadow-color) / 34%),
    11.2px 22.3px 28.1px -1.8px hsl(var(--shadow-color) / 34%),
    17px 33.9px 42.7px -2.1px hsl(var(--shadow-color) / 34%),
    25px 50px 62.9px -2.5px hsl(var(--shadow-color) / 34%);
}

a {
  color: inherit;
  text-decoration: none;
}

a:focus-visible,
button:focus-visible {
  outline: 2px solid var(--brand--text, #1a1a1ae0);
  outline-offset: 3px;
}

.nav a:focus-visible,
.nav button:focus-visible {
  outline-color: #fff;
}

.nav.is-scrolled a:focus-visible,
.nav.is-scrolled button:focus-visible {
  outline-color: var(--brand--text, #1a1a1ae0);
}

.nav-bg {
  transition: height var(--duration-normal) var(--cubic-default);
}

.page-bg {
  transition: opacity var(--duration-fast) var(--cubic-default);
}

.nav {
  transition:
    color var(--duration-fast) var(--cubic-default),
    background-color var(--duration-slow) var(--cubic-default),
    box-shadow var(--duration-normal) var(--cubic-default);
}

.nav-button {
  transition: all var(--duration-slow) var(--cubic-default);
}

@media screen and (width <= 1024px) {
  .nav-button.md--hide {
    display: none;
  }
}

@media screen and (hover: hover) and (pointer: fine) {
  .nav-button:hover {
    transform: scale(1.05);
    box-shadow: var(--shadow-elevation-medium);
  }

  .nav-button:active {
    transform: scale(0.95);
  }
}

/* ———— SHOW DROPDOWN ———— */
.nav-dropdown {
  transition:
    all var(--duration-fast) ease,
    transform var(--duration-normal) var(--cubic-default);
}

[data-dropdown-toggle]:not([data-dropdown-toggle='closed']):hover
  + .nav-dropdown,
[data-dropdown-toggle]:not([data-dropdown-toggle='closed']):focus-visible
  + .nav-dropdown,
[data-dropdown-toggle]:not([data-dropdown-toggle='closed'])
  + .nav-dropdown:hover,
[data-dropdown-toggle]:not([data-dropdown-toggle='closed'])
  + .nav-dropdown:focus-within {
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
}

/* ————  DROPDOWN CONTENT LIST ITEMS ———— */
.nav-dropdown__content-li {
  transition: all var(--duration-normal) var(--cubic-default);
  transition-delay: 0.18s;
  opacity: 0;
  transform: translate(4em, 0);
}

.nav-dropdown__content-li:nth-child(2) {
  transition-delay: 0.24s;
}

.nav-dropdown__content-li:nth-child(3) {
  transition-delay: 0.3s;
}

.nav-dropdown__content-li:nth-child(4) {
  transition-delay: 0.36s;
}

.nav-dropdown__content-li:nth-child(5) {
  transition-delay: 0.44s;
}

/* ————  DROPDOWN LINKS + IMAGES ———— */
.nav-dropdown__link:hover .nav-dropdown__img-overlay,
.nav-dropdown__link:focus-visible .nav-dropdown__img-overlay {
  opacity: 0;
}

.nav-dropdown__link:hover .nav-dropdown__img,
.nav-dropdown__link:focus-visible .nav-dropdown__img {
  transform: scale(1.1);
}

/* ———— DROPDOWN LINKS ———— */
.nav-dropdown__link.is--static:hover,
.nav-dropdown__link.is--static:focus-visible {
  background: #d7d1cd;
}

/* ———— NAV LINKS ———— */
a.nav-link .nav-link__label::after {
  content: '';
  position: absolute;
  inset-inline-start: 0;
  bottom: -1px;
  width: 100%;
  height: 1px;
  background: currentcolor;
  transition: transform var(--duration-normal) var(--cubic-default);
  transform: scale(0, 1);
  transform-origin: 100% center;
}

a.nav-link:hover .nav-link__label::after,
a.nav-link:focus-visible .nav-link__label::after {
  transform: scale(1, 1);
  transform-origin: 0% center;
}

/* ———— Sticky nav ———— */
.nav-logo {
  transition: 0.3s var(--cubic-default) filter;
}

.is-scrolled .nav-logo {
  filter: invert(0);
}

.nav.is-scrolled {
  background-color: #ffffffdb;
  color: var(--brand--text, #1a1a1ae0);
  backdrop-filter: blur(10px);
  box-shadow: var(--shadow-elevation-high);
}

.nav.is-scrolled .nav-button.is--primary {
  background-color: var(--brand--text, #1a1a1ae0);
  border-color: var(--brand--text, #1a1a1ae0);
  color: #fff;
}

/* ———— DROPDOWN OPEN STATE (when nav is not scrolled) ———— */

/* Apply inverted logo filter when dropdown is open but nav hasn't been scrolled yet */
.nav:not(.is-scrolled):has([data-dropdown-toggle='open']) .nav-logo {
  filter: invert(0);
}

/* ———— MOBILE STATE WITH BURGER MENU ———— */
@media screen and (width <= 767px) {
  :root {
    --nav-bg-height: 100dvh;
  }

  .nav-dropdown__overflow {
    transition: grid-template-rows var(--duration-normal) var(--cubic-default);
  }

  .nav-center {
    transition:
      all var(--duration-normal) var(--cubic-default),
      opacity var(--duration-fast) var(--cubic-default);
  }

  .menu-button__line {
    transition: all var(--duration-normal) var(--cubic-default);
  }

  .is-scrolled .menu-button__line {
    background-color: #fff;
  }

  /* ———— STYLES WHEN MENU IS OPEN ———— */
  :is([data-menu-status='open']) {
    color: var(--brand--text, #1a1a1ae0);

    .menu-button__line:nth-of-type(1) {
      transform: translate(0, 0.125em) rotate(135deg);
      background-color: #fff;
    }

    .menu-button__line:nth-of-type(2) {
      transform: translate(0, -0.175em) rotate(-135deg);
      background-color: #fff;
    }

    .nav-bg {
      height: var(--nav-bg-height);
    }

    .page-bg {
      opacity: 1;
    }

    .nav-logo {
      filter: invert(0);
    }

    .nav-button.is--primary {
      background-color: var(--brand--text, #1a1a1ae0);
      border-color: var(--brand--text, #1a1a1ae0);
      color: #fff;
    }

    .nav-center {
      opacity: 1;
      visibility: visible;
      transform: translate(0, 0);
      transition-delay: 0.1s;
    }
  }

  [data-dropdown-toggle='open'] + .nav-dropdown .nav-dropdown__overflow {
    grid-template-rows: 1fr;
  }

  [data-dropdown-toggle='open'] + .nav-dropdown .nav-dropdown__content-li {
    opacity: 1;
    transform: translate(0, 0);
  }

  [data-dropdown-toggle='open'] .nav-link__dropdown-icon {
    transform: rotate(180deg);
  }

  [data-dropdown-toggle='open'] .nav-logo {
    filter: invert(0);
  }
}

/* Reduced Motion Support - Disable animations and transitions */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    transition-delay: 0ms !important;
  }

  .nav-dropdown__content-li {
    transition-delay: 0ms !important;
    opacity: 1;
    transform: none;
  }

  .nav-button:hover,
  .nav-button:active {
    transform: none !important;
  }

  .nav-dropdown__link:hover .nav-dropdown__img,
  .nav-dropdown__link:focus-visible .nav-dropdown__img {
    transform: none;
  }
}
